# 知识卡片生成器产品需求文档

## 1. 项目概述

### 1.1 项目背景
社交媒体内容创作是普遍需求，但高质量的知识卡片制作需要设计技能和大量时间。用户希望能够快速将知识要点转化为美观的可分享卡片，但现有工具要么过于复杂，要么缺乏个性化。同时，Claude Code在后端已具备强大的内容理解和生成能力，但缺乏友好的前端界面。

### 1.2 项目目标
构建一个**AI驱动的知识卡片生成器**，通过友好的Web界面让用户输入知识主题，选择风格模板，快速生成专业的社交媒体知识卡片，专注于PC端体验优化和一键分享功能。

### 1.3 核心价值
- **智能生成**：基于Claude Code的AI能力，智能理解主题并生成结构化内容
- **风格多样**：提供丰富的公共风格模板，满足不同场景需求
- **快速输出**：从主题输入到可分享卡片，整个流程5分钟内完成
- **一键分享**：内置截图和导出功能，直接适配各大社交媒体平台
- **个人管理**：按命题分类管理个人卡片库，支持历史记录和复用

## 2. 需求分析

### 2.1 目标用户
- **主要用户**：内容创作者、知识工作者、教育工作者、营销人员
- **次要用户**：学生、自媒体运营者、企业培训师
- **使用场景**：知识科普、技能分享、产品介绍、教学内容、营销推广

### 2.2 核心痛点
1. **设计门槛高**：制作专业知识卡片需要设计技能和专业工具
2. **内容结构化难**：将零散知识点组织成逻辑清晰的卡片内容困难
3. **风格一致性差**：手工制作难以保持多张卡片的风格统一
4. **制作效率低**：传统设计工具制作一套卡片需要数小时
5. **平台适配繁琐**：不同社交平台需要不同尺寸和格式的卡片

### 2.3 功能需求

#### 2.3.1 核心工作流程
**5步式知识卡片生成流程：**

1. **主题输入与风格选择**
   - 自然语言主题描述输入
   - 公共风格模板库选择(.md规范文档)
   - 智能主题分析和风格推荐

2. **AI内容生成**
   - 调用Claude Code生成结构化JSON内容
   - 实时显示生成进度和中间结果
   - 支持内容微调和重新生成

3. **MCP服务处理**
   - 将JSON传递给MCP server工具
   - 获取卡片预览URL
   - 错误处理和重试机制

4. **卡片预览与编辑**
   - 在线预览生成的多张卡片
   - 基础编辑功能(文字、颜色、布局)
   - 不同社交平台尺寸预览

5. **导出与分享**
   - 一键截图所有卡片
   - 多格式导出(PNG、JPG、PDF)
   - 社交平台直接分享功能

#### 2.3.2 辅助功能需求
- **个人卡片库管理**：按命题分类存储用户生成的卡片
- **历史记录**：快速访问和复用之前的主题和风格选择
- **模板收藏**：收藏常用的风格模板
- **批量操作**：批量导出、批量分享功能
- **快捷键支持**：PC端键盘导航和操作优化

## 3. 系统架构设计

### 3.1 整体架构
```
┌─────────────────────────────────────────────────────────────┐
│                    前端层 (Vue 3 + Fluent Design)            │
│  ┌─────────────────┐ ┌─────────────────┐ ┌──────────────────┐ │
│  │   主题输入界面   │ │   风格模板选择   │ │   卡片预览编辑   │ │
│  └─────────────────┘ └─────────────────┘ └──────────────────┘ │
│  ┌─────────────────┐ ┌─────────────────┐ ┌──────────────────┐ │
│  │   生成进度展示   │ │   导出分享界面   │ │   个人卡片管理   │ │
│  └─────────────────┘ └─────────────────┘ └──────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                               ↓ ↑ HTTP/WebSocket
┌─────────────────────────────────────────────────────────────┐
│                    中间层 (Node.js + Express)               │
│  ┌─────────────────┐ ┌─────────────────┐ ┌──────────────────┐ │
│  │   请求路由管理   │ │   用户会话管理   │ │   文件系统操作   │ │
│  └─────────────────┘ └─────────────────┘ └──────────────────┘ │
│  ┌─────────────────┐ ┌─────────────────┐ ┌──────────────────┐ │
│  │   风格模板解析   │ │   JSON数据处理   │ │   MCP接口封装    │ │
│  └─────────────────┘ └─────────────────┘ └──────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                               ↓ ↑
┌─────────────────────────────────────────────────────────────┐
│                      后端核心层                            │
│  ┌─────────────────┐ ┌─────────────────┐ ┌──────────────────┐ │
│  │   Claude Code    │ │   MCP Server    │ │   文件存储系统   │ │
│  │   (AI生成引擎)   │ │   (卡片渲染)    │ │   (模板+用户数据) │ │
│  └─────────────────┘ └─────────────────┘ └──────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 数据存储结构
```
terminal-backend/
├── templates/           # 公共风格模板文件夹
│   ├── business.md      # 商务风格规范
│   ├── creative.md      # 创意风格规范
│   ├── educational.md   # 教育风格规范
│   └── tech.md         # 科技风格规范
├── users/              # 用户数据文件夹
│   └── [username]/     # 用户文件夹
│       ├── cards/      # 用户卡片文件夹
│       │   ├── [命题1]/  # 以命题命名的卡片文件夹
│       │   │   ├── content.json    # 卡片内容JSON
│       │   │   ├── metadata.json   # 元数据信息
│       │   │   └── exports/        # 导出文件
│       │   └── [命题2]/
│       ├── history.json # 用户操作历史
│       └── preferences.json # 用户偏好设置
└── config/
    ├── system.json     # 系统配置
    └── mcp-config.json # MCP服务配置
```

## 4. 详细交互设计

### 4.1 主界面布局 (简化单页设计)
```
┌──────────────────────────────────────────────────────────────────────────────┐
│                                知识卡片生成器                                 │
├───────────────────────┬──────────────────────────────────────────────────────┤
│                       │                                                      │
│      我的卡片         │                                                      │
│                       │                                                      │
│   卡片文件夹1 (3)     │                                                      │
│                       │            输入框：[咖啡的烘焙方法]                    │
│   卡片文件夹2 (5)     │                                                      │
│                       │                                                      │
│   咖啡的烘焙方法 (2)   │                                                      │
│                       │                                                      │
│   Vue开发技巧 (8)     │              生成卡片url预览区                        │
│                       │                                                      │
│                       │         (iframe展示MCP生成的卡片页面)                 │
│                       │                                                      │
│                       │                                                      │
│                       │                                                      │
│                       │                                                      │
│                       │                                                      │
│                       │                                                      │
├───────────────────────┴──────────────────────────────────────────────────────┤
│  [风格模板1] [风格模板2] [风格模板3] [风格模板4] [风格模板5] [风格模板6]       │
│                                                                              │
│                              [咖啡的烘焙方法] [创建卡片]                      │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 核心工作流程详细设计

#### 4.2.1 步骤1：主题输入与风格选择
**用户操作流程：**
```
用户在主题输入框输入知识内容描述
    ↓
AI实时分析输入内容，提供风格推荐
    ↓
用户从公共模板库选择风格(.md文档)
    ↓
系统显示选择的风格规范预览
    ↓
确认后进入下一步
```

**界面交互细节：**
- **智能输入框**：支持500字输入，实时字数统计
- **AI推荐提示**：基于内容分析推荐最适合的3个风格模板
- **风格预览**：展示每个风格的示例卡片和特点描述
- **历史记录快速填充**：Ctrl+H 快速选择历史主题
- **模板收藏功能**：星标收藏常用模板

#### 4.2.2 步骤2：两阶段生成流程
**技术执行流程：**
```
第一阶段：生成JSON文件
构造生成提示词1：
"根据风格模板1.md文档的规范，就以下命题，生成一组卡片的json文档：[咖啡的烘焙方法]"
    ↓
发送prompt到后端Terminal
    ↓
Claude Code生成JSON文件并保存到用户文件夹
    ↓
返回生成的JSON文件路径（如：users/username/cards/咖啡的烘焙方法/content.json）

第二阶段：生成卡片URL
构造生成提示词2：
"使用[xxxx]json文件生成卡片"
    ↓
后端Terminal调用MCP工具
    ↓
MCP Server渲染HTML卡片
    ↓
返回可访问的卡片URL
    ↓
前端iframe渲染URL内容
```

**用户体验优化：**
- **进度动画**：显示AI思考和生成过程
- **中间结果展示**：实时显示生成的卡片标题和要点
- **生成控制**：支持暂停、重新生成、微调参数
- **多版本生成**：一次生成2-3个版本供选择

#### 4.2.3 步骤3：MCP服务处理
**系统处理流程：**
```
将生成的JSON数据传递给MCP server tool
    ↓
MCP server根据JSON渲染HTML卡片页面
    ↓
返回可访问的卡片预览URL
    ↓
前端加载并展示卡片内容
```

**用户界面展示：**
- **处理状态提示**：显示"正在渲染卡片..."
- **URL生成通知**：成功后显示"卡片已生成，准备预览"
- **错误处理界面**：失败时提供重试和调整选项

#### 4.2.4 步骤4：卡片预览与编辑
**功能设计：**
- **iframe预览**：内嵌显示MCP生成的卡片URL
- **多卡片浏览**：左右切换查看生成的多张卡片
- **基础编辑**：修改文字内容、调整颜色、字体大小
- **平台适配预览**：切换Instagram、Twitter、微博等尺寸
- **实时预览**：编辑修改实时反映到预览中

#### 4.2.5 步骤5：导出与分享
**导出功能：**
- **一键截图**：自动截取所有卡片并保存
- **批量下载**：ZIP打包所有格式文件
- **格式选择**：PNG、JPG、PDF、SVG多种格式
- **尺寸定制**：针对不同社交平台的最优尺寸

**分享功能：**
- **社交平台直接分享**：微博、Twitter、LinkedIn一键分享
- **链接分享**：生成分享链接，支持在线查看
- **二维码生成**：移动端分享二维码

### 4.3 PC端交互优化

#### 4.3.1 键盘快捷键系统
```
全局快捷键：
- Ctrl+N: 创建新卡片
- Ctrl+S: 保存当前进度
- Ctrl+D: 快速下载
- Ctrl+Shift+P: 切换右侧面板
- Ctrl+Shift+H: 显示快捷键帮助
- F11: 全屏模式

步骤导航：
- Alt+1~5: 快速跳转到对应步骤
- 左右箭头: 上一步/下一步
- Enter: 确认当前操作
- Escape: 取消/关闭弹窗

内容操作：
- Ctrl+H: 历史记录
- Ctrl+T: 模板库
- Ctrl+P: 预览当前卡片
- Ctrl+E: 进入编辑模式
```

#### 4.3.2 鼠标交互增强
- **双击操作**：双击卡片进入编辑模式，双击模板直接应用
- **拖拽功能**：拖拽调整面板宽度，拖拽重排卡片顺序
- **右键菜单**：丰富的上下文菜单选项
- **悬停预览**：鼠标悬停显示详细信息和操作提示

#### 4.3.3 焦点管理优化
- **Tab导航**：完整的键盘Tab序列导航
- **视觉焦点指示**：清晰的焦点高亮效果
- **区域跳转**：快速在不同功能区域间切换焦点

## 5. 技术实现方案

### 5.1 前端技术栈
- **框架**：Vue 3 + Composition API
- **UI设计**：Microsoft Fluent Design System
- **状态管理**：Pinia
- **HTTP客户端**：Axios + Socket.io
- **构建工具**：Vite
- **CSS预处理**：Less/Sass

### 5.2 后端技术栈
- **运行环境**：Node.js 18+
- **Web框架**：Express.js
- **实时通信**：Socket.io
- **Claude Code集成**：Terminal调用
- **MCP Server**：现有MCP工具集成
- **文件系统**：fs-extra

### 5.3 数据流设计

#### 5.3.1 两阶段处理流程
```
第一阶段：JSON生成
用户输入主题 → 选择风格模板 → 构造Prompt1 → 发送到Terminal → Claude生成JSON → 保存到用户文件夹
     ↓              ↓              ↓               ↓              ↓                ↓
"咖啡的烘焙方法" → "风格模板1" → "根据风格模板1.md..." → Terminal执行 → content.json → users/[username]/cards/咖啡的烘焙方法/

第二阶段：卡片渲染  
JSON文件路径 → 构造Prompt2 → 发送到Terminal → MCP工具渲染 → 返回URL → 前端iframe展示
     ↓             ↓              ↓              ↓           ↓            ↓
"content.json" → "使用[xxxx]json..." → Terminal执行 → MCP Server → https://... → 预览区渲染
```

#### 5.3.2 具体执行示例
```
// 第一次Terminal调用
输入: "根据风格模板1.md文档的规范，就以下命题，生成一组卡片的json文档：[咖啡的烘焙方法]"
输出: JSON文件保存到 users/zhangsan/cards/咖啡的烘焙方法/content.json

// 第二次Terminal调用  
输入: "使用[users/zhangsan/cards/咖啡的烘焙方法/content.json]json文件生成卡片"
输出: 卡片URL https://mcp-server/cards/xxxxx
```

## 6. 成功指标与验收标准

### 6.1 用户体验指标
- **完整流程用时**：从输入主题到导出卡片 < 5分钟
- **生成成功率**：> 95%
- **用户满意度**：> 4.5/5.0
- **重复使用率**：> 70%

### 6.2 技术性能指标
- **AI生成响应时间**：< 30秒
- **MCP渲染时间**：< 10秒
- **页面加载速度**：< 2秒
- **系统可用性**：> 99%

### 6.3 功能完整性
- **风格模板覆盖**：至少5种主要风格模板
- **导出格式支持**：PNG、JPG、PDF、SVG
- **社交平台适配**：Instagram、Twitter、微博、LinkedIn
- **键盘快捷键**：20+个常用快捷键

## 7. 风险评估与应对

### 7.1 技术风险
- **Claude Code API稳定性**：实现重试机制和降级方案
- **MCP Server可用性**：本地缓存和备用渲染方案
- **大量并发请求**：实现队列管理和限流机制

### 7.2 用户体验风险
- **AI生成质量不稳定**：提供多版本生成和手动调整功能
- **风格模板不足**：建立模板贡献机制，逐步扩充
- **学习成本较高**：提供完整的新手引导和帮助文档

### 7.3 业务风险
- **用户采用意愿**：提供免费试用和案例展示
- **内容版权问题**：明确生成内容的使用规范
- **竞品替代威胁**：持续优化AI生成质量和用户体验

## 8. 总结

本知识卡片生成器通过将Claude Code的AI能力包装成友好的GUI界面，实现了从**命令行专家工具**到**普通用户友好产品**的转换。核心价值在于：

1. **降低使用门槛**：复杂的AI调用变成简单的表单操作
2. **提升生成效率**：5分钟完成专业卡片制作流程
3. **优化PC端体验**：完整的键盘导航和桌面应用体验
4. **保持专业品质**：基于成熟的AI能力，确保内容质量

该方案在技术上可行，用户体验上友好，商业价值上可观，能够有效将后端AI能力转化为具有市场竞争力的前端产品。