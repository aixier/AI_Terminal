# AI Terminal 素材管理功能设计文档

## 文档信息
- **版本**: v1.0.0
- **创建日期**: 2025-01-06
- **最后更新**: 2025-01-06
- **作者**: 产品设计团队
- **状态**: 设计阶段

---

## 📋 目录
1. [产品概述](#产品概述)
2. [需求分析](#需求分析)
3. [功能设计](#功能设计)
4. [界面设计](#界面设计)
5. [技术架构](#技术架构)
6. [数据结构](#数据结构)
7. [用户体验](#用户体验)
8. [开发计划](#开发计划)
9. [风险评估](#风险评估)

---

## 📊 产品概述

### 项目背景
AI Terminal是一个AI内容生成平台，用户在使用过程中需要频繁引用各种素材（图片、文档、模板等）。当前系统缺乏统一的素材管理功能，用户无法有效组织和复用自己的资源，影响了创作效率。

### 产品定位
**个人AI创作素材管理中心** - 为用户提供一站式的素材上传、组织、管理和智能引用服务。

### 核心价值
- 📁 **统一管理**：集中管理所有创作素材
- 🔍 **智能检索**：快速找到需要的素材
- 🎯 **便捷引用**：在AI生成时一键引用素材
- 🔄 **提高复用**：避免重复上传，积累素材库
- 📈 **效率提升**：简化创作流程，专注内容本身

---

## 🎯 需求分析

### 目标用户群体

#### 主要用户
1. **内容创作者** (40%)
   - 需求：管理大量图片、文案模板
   - 痛点：素材分散，查找困难
   - 使用频率：日常高频使用

2. **设计师** (30%)
   - 需求：设计素材库，版本管理
   - 痛点：文件命名混乱，历史版本丢失
   - 使用频率：项目周期性使用

3. **营销人员** (20%)
   - 需求：品牌素材，营销物料管理
   - 痛点：团队协作，素材一致性
   - 使用频率：活动期间高频使用

4. **个人用户** (10%)
   - 需求：个人文档，照片整理
   - 痛点：存储分散，缺乏组织
   - 使用频率：偶发性使用

### 用户故事

#### 核心用户故事
```
作为一名内容创作者
我想要上传和管理我的创作素材
以便在AI生成内容时快速引用这些素材
```

#### 详细用户故事
1. **上传管理**
   - 作为用户，我想要批量上传文件，以便快速建立素材库
   - 作为用户，我想要创建文件夹分类，以便有序组织素材
   - 作为用户，我想要为素材添加标签，以便更好地分类管理

2. **查找使用**
   - 作为用户，我想要快速搜索素材，以便在大量文件中找到所需内容
   - 作为用户，我想要预览素材内容，以便确认选择的正确性
   - 作为用户，我想要查看使用历史，以便了解素材的使用情况

3. **智能引用**
   - 作为用户，我想要在提示词中快速引用素材，以便提高创作效率
   - 作为用户，我想要得到素材推荐，以便发现相关的有用资源
   - 作为用户，我想要验证引用有效性，以便确保生成结果正确

### 功能需求优先级

#### P0 (MVP核心功能) - 必须实现
- ✅ 文件上传（单个/批量，拖拽支持）
- ✅ 文件夹管理（创建/删除/重命名）
- ✅ 基础预览功能（前端实现）
- ✅ 简单筛选功能（前端实现）
- ✅ 引用功能（@路径引用 + 选择器）

#### P1 (未来扩展) - 可选功能
- 🔄 高级搜索（后端搜索接口）
- 🔄 标签系统
- 🔄 使用统计
- 🔄 AI辅助功能

---

## 🛠 功能设计

### 功能架构图 (简化版)

```
素材管理系统 (轻量级)
├── 文件管理模块
│   ├── 上传功能
│   │   ├── 拖拽上传
│   │   └── 批量上传
│   ├── 组织功能
│   │   └── 文件夹管理
│   └── 操作功能
│       ├── 基础预览 (前端)
│       ├── 删除
│       └── 重命名
├── 简单筛选模块
│   ├── 文件名过滤
│   ├── 类型筛选
│   └── 时间筛选
└── 引用系统模块
    ├── 路径引用
    └── 引用选择器
```

### 详细功能规格

#### 1. 文件上传功能

##### 1.1 基础上传
- **支持方式**：
  - 点击上传按钮选择文件
  - 拖拽文件到上传区域
  - 拖拽文件夹（保持目录结构）
  - 粘贴剪贴板内容

- **支持格式**：
  - **图片**：JPG, PNG, GIF, SVG, WebP, BMP
  - **文档**：PDF, DOC, DOCX, TXT, MD, RTF
  - **代码**：JS, TS, HTML, CSS, JSON, XML, YAML
  - **音视频**：MP3, MP4, WAV, MOV, AVI
  - **压缩包**：ZIP, RAR (仅解压预览)

- **限制规则**：
  - 单文件最大：50MB
  - 批量上传：最多100个文件
  - 总存储空间：用户级别限制（个人1GB，企业10GB）

##### 1.2 上传体验
- **进度显示**：
  - 单文件进度条
  - 批量上传队列
  - 上传速度显示
  - 剩余时间估算

- **错误处理**：
  - 格式不支持提示
  - 大小超限警告
  - 网络中断重试
  - 上传失败恢复

#### 2. 文件组织功能

##### 2.1 文件夹管理
```
用户素材根目录 (/assets/)
├── 📁 我的图片
├── 📁 文档模板  
├── 📁 设计文件
└── 📁 其他文件
```

- **操作功能**：
  - 创建文件夹（支持多层嵌套）
  - 重命名文件夹
  - 移动文件
  - 删除文件夹（批量确认）

#### 3. 简单筛选功能

##### 3.1 前端筛选
- **基础筛选**：
  - 文件名过滤（前端实时搜索）
  - 文件类型筛选（图片、文档、其他）
  - 创建时间排序
  - 文件大小排序

- **筛选体验**：
  - 实时过滤结果
  - 清空筛选条件
  - 记住筛选状态

#### 4. 素材引用功能

##### 4.1 引用格式 (简化版)
```javascript
// 路径引用（主要方式）
@/assets/images/logo.png
@/assets/documents/template.docx
@/assets/design/banner.jpg

// 文件名引用（便捷方式）
@logo.png
@template.docx
```

##### 4.2 引用体验
- **引用选择器**：
  - 输入 `@` 触发素材选择面板
  - 显示最近使用的素材
  - 点击选择自动插入路径
  - 支持文件夹浏览

- **基础验证**：
  - 检查文件是否存在
  - 无效引用提示

---

## 🎨 界面设计

### 整体布局 (简化版)

```
┌─────────────────────────────────────────────────────────────────┐
│ 🏠 AI Terminal > 素材管理              [文件名筛选框] ⚙️ 设置    │
├─────────────────────────────────────────────────────────────────┤
│ 📁 文件夹导航 (200px)   │ 主内容区域 (auto)      │ 详情面板 (280px) │
│ ├─ 📷 图片             │ ┌─ 工具栏 ─────────────┐ │ 📄 文件预览        │
│ ├─ 📝 文档             │ │ 📤 上传 📁 新建文件夹  │ │ 📊 文件信息        │
│ ├─ 🎨 设计文件         │ │ 🗂️ 视图切换 📋 类型   │ │                  │
│ └─ 📄 其他             │ ├─────────────────────┤ │ 🔗 快速操作        │
│                       │ │                     │ │ - 复制路径         │
│ 📊 存储信息            │ │   文件网格/列表视图    │ │ - 重命名          │
│ 已用: 256MB / 1GB     │ │                     │ │ - 删除            │
│                       │ │                     │ │                  │
└─────────────────────────────────────────────────────────────────┘
│ 状态栏：已选择 3 个文件                                         │
└─────────────────────────────────────────────────────────────────┘
```

### 关键界面组件

#### 1. 上传组件
```html
┌─────────────────────────────────────┐
│         拖拽上传区域                  │
│    📤 将文件拖拽到此处或点击上传       │
│                                   │
│  支持格式：图片、文档、音视频等         │
│  单文件最大50MB，批量最多100个文件     │
│                                   │
│ [选择文件] [选择文件夹] [从URL导入]    │
└─────────────────────────────────────┘
```

#### 2. 文件卡片组件
```html
┌─────────────────────┐
│   📷 [缩略图]        │
│                    │
│   logo.png         │
│   PNG • 128KB      │
│   2小时前           │
│   📎 5次引用        │
│ [预览] [下载] [···]  │
└─────────────────────┘
```

#### 3. 引用选择器 (简化版)
```html
┌─────────────────────────────────────────┐
│ 📁 选择素材文件                          │
├─────────────────────────────────────────┤
│ 📷 最近使用                              │
│ ├─ logo.png                    [插入]   │
│ ├─ banner.jpg                  [插入]   │
│ └─ icon.svg                    [插入]   │
├─────────────────────────────────────────┤
│ 📁 浏览文件夹                            │
│ ├─ 📁 图片/                    [展开]   │
│ ├─ 📁 文档/                    [展开]   │
│ └─ 📁 设计文件/                [展开]   │
└─────────────────────────────────────────┘
```

### 响应式设计

#### 桌面端 (≥1200px)
- 三栏布局：导航栏(200px) + 主区域(auto) + 详情栏(300px)
- 支持拖拽、多选、右键菜单等桌面交互
- 快捷键支持：Ctrl+U(上传)、Del(删除)、F2(重命名)

#### 平板端 (768px-1199px)
- 两栏布局：主区域 + 可折叠侧栏
- 触摸优化的按钮和手势
- 详情面板改为底部抽屉式

#### 移动端 (<768px)
- 单栏布局，全屏显示
- 底部标签栏导航
- 简化功能，重点支持查看和快速引用

---

## 🔧 技术架构

### 系统架构图

```
┌─────────────────────────────────────────────────────────────┐
│                     前端层 (Vue.js)                         │
├─────────────────────────────────────────────────────────────┤
│ 页面组件层  │ 资产管理页面 │ 引用选择器组件 │ 文件预览组件    │
├─────────────────────────────────────────────────────────────┤
│ 状态管理层  │      Pinia Store (资产状态管理)              │
├─────────────────────────────────────────────────────────────┤
│ API服务层   │     API Service (RESTful接口封装)           │
└─────────────────────────────────────────────────────────────┘
                              ↕ HTTP/WebSocket
┌─────────────────────────────────────────────────────────────┐
│                   后端层 (Node.js/Express)                  │
├─────────────────────────────────────────────────────────────┤
│ 路由层      │  /api/assets/* (资产管理API)                │
├─────────────────────────────────────────────────────────────┤
│ 服务层      │ AssetService │ SearchService │ TagService    │
├─────────────────────────────────────────────────────────────┤
│ 数据层      │    文件系统    │   JSON元数据   │   SQLite    │
└─────────────────────────────────────────────────────────────┘
```

### 后端API设计

#### 核心API端点 (简化版)

> **📋 API状态说明**:
> - ✅ **现有接口** - 后端已实现，可直接使用
> - 🔄 **扩展接口** - 基于现有接口扩展功能
> - 🆕 **新增接口** - 需要完全新开发

```javascript
// === 基础文件操作 ===
🆕 GET    /api/assets                    // 获取资产列表 (新增，带简单筛选)
🔄 POST   /api/assets/upload            // 上传文件 (扩展现有 /api/upload/files)
🆕 GET    /api/assets/:id               // 获取单个资产信息 (新增)
🆕 PUT    /api/assets/:id               // 更新资产基础信息 (新增)
🔄 DELETE /api/assets/:id               // 删除资产 (扩展现有 /api/upload/:type/:name)

// === 文件夹操作 ===
🔄 GET    /api/assets/folders           // 获取文件夹树 (扩展现有 /api/terminal/folders)
🔄 POST   /api/assets/folders          // 创建文件夹 (扩展现有 /api/upload/folder)
🔄 PUT    /api/assets/folders/:id      // 重命名文件夹 (扩展现有 /api/terminal/folder/rename)
🔄 DELETE /api/assets/folders/:id      // 删除文件夹 (扩展现有 /api/upload/:type/:name)

// === 引用支持 ===
🆕 GET    /api/assets/references        // 获取可引用的资产列表 (新增，用于@选择器)
```

#### 现有API复用分析

##### ✅ 可直接复用的现有接口
```javascript
// 文件上传 (upload.js)
POST   /api/upload/files              // 批量文件上传 ✅
POST   /api/upload/file               // 基于内容创建文件 ✅
POST   /api/upload/folder             // 创建文件夹 ✅
GET    /api/upload/structure          // 获取目录结构 ✅
DELETE /api/upload/:type/:name        // 删除文件/文件夹 ✅

// 用户空间管理 (workspace.js)
GET    /api/workspace/:username       // 用户workspace结构 ✅
POST   /api/workspace/:username/create // 创建文件/文件夹 ✅
GET    /api/workspace/:username/file/* // 读取文件内容 ✅
PUT    /api/workspace/:username/file/* // 更新文件内容 ✅
DELETE /api/workspace/:username/file/* // 删除文件 ✅

// 文件系统操作 (terminal.js)
GET    /api/terminal/folders          // 获取文件夹结构 ✅
POST   /api/terminal/save-html        // 保存HTML文件 ✅
POST   /api/terminal/save-card        // 保存卡片内容 ✅
PUT    /api/terminal/folder/rename    // 重命名文件夹 ✅
PUT    /api/terminal/card/rename      // 重命名文件 ✅
DELETE /api/terminal/card             // 删除文件 ✅

// 音视频转录 (transcription.js)
POST   /api/transcription/file        // 单文件转录上传 ✅
POST   /api/transcription/batch       // 批量文件转录 ✅
```

##### 🔄 需要扩展的现有接口功能
```javascript
// 基于现有upload.js扩展
POST   /api/assets/upload
       ↳ 扩展 /api/upload/files，增加:
         - 缩略图生成
         - 元数据提取
         - 标签自动分析
         - 存储路径规范化

// 基于现有workspace.js扩展  
GET    /api/assets/folders
       ↳ 扩展 /api/workspace/:username，增加:
         - 素材专用目录结构
         - 标签信息
         - 使用统计
         - 缩略图路径
```

##### 🆕 完全新增的接口 (简化版)
```javascript
// 素材管理核心功能 (需新建 assets.js)
GET    /api/assets                    // 素材列表（简单筛选）
GET    /api/assets/:id               // 单个素材详情
PUT    /api/assets/:id               // 更新素材基础信息
GET    /api/assets/references        // 获取可引用资产列表（用于@选择器）
```

##### 🛠 技术集成点
- **认证系统**: 复用现有 `authenticateUserOrDefault` 中间件 ✅
- **用户管理**: 复用现有 `userService` 用户服务 ✅  
- **文件存储**: 基于现有 workspace 目录结构扩展 ✅
- **权限控制**: 继承现有用户权限和数据隔离机制 ✅

### 数据存储设计

#### 文件存储结构
```
/app/data/users/{username}/
├── workspace/                 # 现有工作空间
└── assets/                   # 新增资产目录
    ├── files/                # 实际文件存储
    │   ├── images/
    │   ├── documents/
    │   └── others/
    ├── thumbnails/           # 缩略图缓存
    ├── metadata.json         # 资产元数据
    └── tags.json            # 标签定义
```

#### 元数据结构
```json
{
  "version": "1.0",
  "assets": {
    "asset_001": {
      "id": "asset_001",
      "name": "company-logo.png",
      "originalName": "Company Logo Final.png",
      "path": "/assets/files/images/asset_001.png",
      "type": "image",
      "mimeType": "image/png",
      "size": 102400,
      "hash": "sha256_hash_value",
      "createdAt": "2025-01-06T10:30:00Z",
      "updatedAt": "2025-01-06T10:30:00Z",
      "lastAccessed": "2025-01-06T15:20:00Z",
      "folderId": "folder_001",
      "tags": ["logo", "brand", "official"],
      "description": "公司官方Logo，用于各种宣传材料",
      "metadata": {
        "width": 512,
        "height": 256,
        "hasTransparency": true,
        "colorProfile": "sRGB"
      },
      "usage": {
        "totalReferences": 12,
        "lastReferenced": "2025-01-06T14:30:00Z",
        "referenceSources": ["prompt_001", "template_002"]
      }
    }
  },
  "folders": {
    "folder_001": {
      "id": "folder_001",
      "name": "品牌素材",
      "path": "/assets/brand",
      "parentId": null,
      "createdAt": "2025-01-06T10:00:00Z",
      "assetCount": 15
    }
  },
  "tags": {
    "tag_001": {
      "id": "tag_001",
      "name": "logo",
      "color": "#ff6b6b",
      "createdAt": "2025-01-06T10:00:00Z",
      "usageCount": 8
    }
  }
}
```

---

## 👥 用户体验设计

### 用户旅程地图

#### 首次使用用户
```
发现功能 → 了解价值 → 上传素材 → 学会组织 → 尝试引用 → 形成习惯
   ↓         ↓         ↓         ↓         ↓         ↓
引导提示   功能介绍   拖拽上传   自动分类   智能建议   快捷操作
```

#### 日常使用流程
```
进入页面 → 查找素材 → 预览确认 → 引用到提示词 → 生成内容
   ↓         ↓         ↓          ↓           ↓
快速导航   搜索筛选   悬浮预览    一键插入     实时验证
```

### 关键体验点

#### 1. 首次上传体验
- **引导动画**：展示拖拽上传的使用方法
- **示例数据**：预置一些示例素材帮助用户理解
- **成功反馈**：上传完成后的庆祝动效
- **下一步引导**：提示用户如何组织和使用素材

#### 2. 智能化体验
- **自动分类**：根据文件类型自动放入对应文件夹
- **智能标签**：AI分析文件内容生成相关标签
- **相关推荐**：在引用时推荐相似或相关的素材
- **使用模式学习**：根据用户习惯调整界面和推荐

#### 3. 错误处理体验
- **友好错误信息**：用通俗易懂的语言解释问题
- **解决方案建议**：提供具体的解决步骤
- **一键修复**：对于常见问题提供自动修复功能
- **客服支持**：快速联系支持渠道

### 无障碍设计

#### 键盘导航
- Tab键顺序导航
- 空格键选择/确认
- 方向键在网格中导航
- 快捷键支持（可自定义）

#### 屏幕阅读器支持
- 语义化HTML结构
- 完整的ARIA标签
- 图片Alt文本自动生成
- 操作结果语音反馈

#### 视觉辅助
- 高对比度模式支持
- 字体大小调节
- 色彩辅助（色盲友好）
- 动效开关（减少动画）

---

## 📅 开发计划

### 开发任务 (简化版)

#### MVP功能清单
**目标**：实现基础素材管理和引用功能

**后端开发任务**：
- [ ] 🔄 扩展upload API (基于现有 `/api/upload/files`)
  - 增加资产元数据记录
  - 生成唯一资产ID
- [ ] 🆕 资产列表接口 (`/api/assets`)
  - 分页查询资产列表
  - 简单筛选（类型、时间）
- [ ] 🆕 资产详情接口 (`/api/assets/:id`)
  - 获取单个资产信息
  - 支持基础信息更新
- [ ] 🆕 引用支持接口 (`/api/assets/references`)
  - 为@选择器提供资产列表
- [ ] 🔄 文件夹管理 (扩展现有接口)
  - 基于现有文件夹操作功能

**前端开发任务**：
- [ ] 🆕 素材管理页面 (新建Vue页面)
  - 三栏布局：文件夹导航 + 文件列表 + 详情面板
- [ ] 🔄 文件上传组件 (增强现有组件)
  - 支持拖拽上传
  - 批量上传进度显示
- [ ] 🆕 文件列表组件 (新建)
  - 网格和列表视图切换
  - 前端筛选和排序
- [ ] 🆕 引用选择器组件 (新建)
  - @触发的素材选择面板
  - 最近使用 + 文件夹浏览
- [ ] 🆕 文件预览组件 (新建)
  - 基础文件预览功能

**验收标准**：
- ✅ 用户可以上传和管理素材文件
- ✅ 支持文件夹组织
- ✅ 在提示词中可以@引用素材
- ✅ 基本的文件预览功能

### 技术实施计划

#### 后端开发
```javascript
// 1. API路由扩展 (/routes/assets.js)
import express from 'express'
import { AssetService } from '../services/assetService.js'

const router = express.Router()

// 基础CRUD接口
router.get('/', AssetController.list)
router.post('/upload', AssetController.upload)
router.get('/:id', AssetController.get)
router.put('/:id', AssetController.update)
router.delete('/:id', AssetController.delete)

export default router

// 2. 服务层 (/services/assetService.js)
class AssetService {
  async upload(file, userId) {
    // 文件处理、缩略图生成、元数据提取
  }
  
  async search(query, userId) {
    // 全文搜索、标签匹配、筛选排序
  }
  
  async generateThumbnail(filePath) {
    // 图片缩略图、文档预览图生成
  }
}
```

#### 前端开发
```vue
<!-- 主页面组件 -->
<template>
  <div class="asset-manager">
    <AssetSidebar />
    <AssetMainView />
    <AssetDetailPanel />
  </div>
</template>

<!-- 上传组件 -->
<template>
  <div class="upload-zone" @drop="handleDrop" @dragover="handleDragOver">
    <input ref="fileInput" type="file" multiple @change="handleFileSelect" />
    <div class="upload-prompt">
      <Icon name="upload" />
      <p>拖拽文件到此处或点击上传</p>
    </div>
  </div>
</template>

<!-- 引用选择器组件 -->
<template>
  <div class="asset-picker">
    <SearchInput v-model="searchQuery" placeholder="搜索素材..." />
    <AssetGrid :assets="filteredAssets" @select="handleSelect" />
  </div>
</template>
```

### 测试计划

#### 单元测试
- API接口测试覆盖率 >90%
- 组件功能测试覆盖率 >85%
- 文件处理逻辑测试

#### 集成测试
- 上传流程端到端测试
- 搜索功能性能测试
- 引用系统准确性测试

#### 用户测试
- **α测试**：内部团队使用反馈
- **β测试**：邀请10-20名真实用户测试
- **可用性测试**：观察用户使用行为

---

## ⚠️ 风险评估

### 技术风险

#### 高风险
1. **大文件上传性能**
   - **风险描述**：用户上传大文件时可能导致服务器压力过大
   - **缓解措施**：分片上传、进度控制、并发限制
   - **应急预案**：临时文件清理、服务降级

2. **搜索性能问题**
   - **风险描述**：大量素材时搜索响应缓慢
   - **缓解措施**：搜索索引优化、缓存机制、分页加载
   - **应急预案**：搜索服务单独部署、降级到文件名搜索

#### 中风险
1. **存储空间管理**
   - **风险描述**：用户存储空间超限影响使用
   - **缓解措施**：空间配额管理、自动清理机制
   - **应急预案**：扩容计划、付费升级引导

2. **文件格式兼容性**
   - **风险描述**：某些文件格式无法正确处理或预览
   - **缓解措施**：白名单机制、格式检测、降级处理
   - **应急预案**：格式转换服务、手动处理流程

### 产品风险

#### 高风险
1. **用户学习成本**
   - **风险描述**：功能复杂，用户难以快速上手
   - **缓解措施**：简化界面、新手引导、帮助文档
   - **应急预案**：功能精简、专人培训支持

#### 中风险
1. **用户数据安全**
   - **风险描述**：用户上传的私人素材泄露
   - **缓解措施**：权限隔离、加密存储、访问控制
   - **应急预案**：安全审计、数据恢复、用户通知

### 运营风险

#### 中风险
1. **服务器存储成本**
   - **风险描述**：大量文件存储带来成本压力
   - **缓解措施**：存储优化、冷热数据分离、用户配额
   - **应急预案**：收费策略、数据清理政策

---

## 📈 成功指标

### 用户指标
- **功能采用率**：新功能上线后30天内的使用率 >60%
- **用户留存**：使用素材管理功能的用户7日留存率 >80%
- **活跃度**：日活跃用户平均上传/引用素材次数 >5次

### 体验指标
- **上传成功率**：文件上传成功率 >99%
- **搜索响应时间**：平均搜索响应时间 <500ms
- **用户满意度**：功能使用满意度评分 >4.5/5.0

### 技术指标
- **系统稳定性**：服务可用性 >99.9%
- **性能表现**：页面加载时间 <2s
- **存储效率**：重复文件自动去重率 >90%

---

## 📝 附录

### A. 竞品分析

#### 对标产品
1. **Notion**：页面内素材管理，拖拽上传体验好
2. **Figma**：团队素材库，版本管理完善
3. **Canva**：素材搜索推荐，分类清晰
4. **Google Drive**：文件组织，搜索功能强大

#### 差异化优势
- **AI集成**：与AI生成功能深度集成
- **智能引用**：提示词中的快捷引用体验
- **场景专用**：专为内容创作场景优化

### B. 技术选型

#### 前端技术栈
- **框架**：Vue 3 + TypeScript
- **状态管理**：Pinia
- **UI组件**：Element Plus + 自定义组件
- **文件处理**：File API + Canvas API
- **拖拽**：Vue Draggable

#### 后端技术栈
- **框架**：Node.js + Express（现有）
- **文件处理**：Sharp（图片）+ PDF.js（文档）
- **搜索**：Fuse.js（轻量级全文搜索）
- **存储**：文件系统 + JSON元数据

### C. 部署配置

#### Docker配置
```dockerfile
# 扩展现有Dockerfile
RUN apt-get update && apt-get install -y \
    imagemagick \
    ffmpeg \
    poppler-utils

# 增加存储卷
VOLUME /app/data/users
```

#### 环境变量
```bash
# 素材管理配置
ASSET_STORAGE_PATH=/app/data/users
ASSET_MAX_FILE_SIZE=52428800  # 50MB
ASSET_MAX_TOTAL_SIZE=1073741824  # 1GB
THUMBNAIL_QUALITY=80
```

---

## 📞 联系信息

### 项目团队
- **产品经理**：[姓名] - [邮箱]
- **UX设计师**：[姓名] - [邮箱] 
- **技术负责人**：[姓名] - [邮箱]
- **项目经理**：[姓名] - [邮箱]

### 相关文档
- **技术架构文档**：`/docs/architecture.md`
- **API接口文档**：`/docs/api-reference.md`
- **用户使用手册**：`/docs/user-guide.md`

---

## 📊 API开发工作量评估

### 接口开发统计 (简化版)

| 接口类别 | 总数 | ✅现有 | 🔄扩展 | 🆕新增 | 复用率 |
|---------|------|-------|-------|-------|--------|
| **文件操作** | 5个 | 0个 | 4个 | 1个 | 80% |
| **文件夹管理** | 4个 | 0个 | 4个 | 0个 | 100% |
| **引用支持** | 1个 | 0个 | 0个 | 1个 | 0% |
| **总计** | **10个** | **0个** | **8个** | **2个** | **80%** |

### 现有可复用接口汇总

#### 🏗️ 基础设施层 (100%复用)
```javascript
✅ 用户认证: authenticateUserOrDefault
✅ 用户服务: userService.getUserCardPath()
✅ 文件系统: fs operations (fs/promises)
✅ 路径处理: path operations
✅ 错误处理: 现有错误处理机制
```

#### 🔗 接口复用映射 (简化版)
```javascript
// 直接复用扩展 (8个接口)
/api/upload/files           → /api/assets/upload (扩展元数据)
/api/upload/folder          → /api/assets/folders (扩展)
/api/upload/:type/:name     → /api/assets/:id (扩展删除)
/api/terminal/folders       → /api/assets/folders (扩展)
/api/terminal/folder/rename → /api/assets/folders/:id (扩展)
/api/workspace/:username    → /api/assets (扩展为资产列表)
/api/workspace/*/file/*     → /api/assets/:id (扩展)
/api/terminal/card/rename   → /api/assets/:id (扩展重命名)

// 需要新建 (2个接口)
/api/assets                 → 素材列表查询 (新增)
/api/assets/references      → 引用支持 (新增，用于@选择器)
```

### 技术复用优势

#### 高复用率的实现路径
- **80%接口复用率** - 基于现有功能扩展，降低开发风险
- **100%基础设施复用** - 认证、用户管理、文件系统全部复用
- **渐进式功能实现** - 从基础文件管理开始，逐步完善

### 🎯 项目成功关键因素

#### 技术风险控制
1. **最大化复用现有代码** - 80%接口基于现有功能扩展
2. **简化功能设计** - 专注核心需求，避免过度设计
3. **API设计一致性** - 遵循现有RESTful规范

#### 开发效率优化
1. **现有基础设施100%复用** - 认证、用户管理、错误处理
2. **文件系统直接扩展** - 基于workspace结构简单扩展
3. **前端组件复用** - 使用现有UI组件和样式系统
4. **MVP优先策略** - 实现最小可用版本，满足基本需求

---

*本文档版本：v1.1.0 | 最后更新：2025-01-06*
*✅ 已简化功能设计，去掉复杂接口，专注MVP核心功能*
*🎯 接口复用率：80% | 新增接口：仅2个*