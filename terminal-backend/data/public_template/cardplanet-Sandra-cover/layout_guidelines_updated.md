# 布局设计规范

## 核心定位：静态图片生成
- **本质**: 生成固定3:4比例的静态图片，无滚动、无交互
- **硬性要求**: 
  - 所有卡片严格遵守3:4比例（宽:高）
  - 使用 `aspect-ratio: 3/4` 和 `overflow: hidden`
  - 内容必须在固定空间内完整展示

## 封面模板选择机制
**强制执行规则**：
1. **检查用户输入**：是否明确包含"小红书封面"字样
2. **模板选择**：
   - 如果是 → 使用模板2（小红书封面）：纳米老宋字体 + 横版布局
   - 如果否 → 使用模板1（默认封面）：IBM Plex Sans + 海报级视觉
3. **严格执行**：不得混用不同模板的特征

## 防止内容截断的设计策略

### 最高优先级：底部留白规则
- **强制要求**: 所有卡片的最底部元素（无论是图形还是文本）必须距离卡片底边至少20px
- **实现方式**: 
  - 在CSS中设置 `.tutorial-card-content { padding-bottom: 30px; }`
  - 或确保最后一个元素有 `margin-bottom: 20px`
- **目的**: 避免内容贴底造成的视觉截断感

### Logo水印规范
- **强制要求**: 每张卡片必须包含品牌logo水印
- **技术实现**:
  ```css
  .card-watermark {
    position: absolute;
    bottom: 5px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 30px;
    opacity: 0.3;
    z-index: 1;
    pointer-events: none;
  }
  ```
- **位置一致性**: 所有卡片的logo必须在相同位置（底部中央），确保视觉整齐
- **不影响布局**: 使用绝对定位，logo不占用内容空间，不参与flex计算

### 优先级1：图文并茂
- **必须要求**: 每张卡片都要有视觉元素（可以是图形、数字、装饰线条、特殊排版等）
- **禁止**: 
  - 纯文字卡片
  - 使用emoji Unicode字符（如📺❤️等）
- **目的**: 保持视觉趣味性，避免阅读枯燥
- **视觉元素使用规则**：
  1. **主视觉元素**（自定义SVG/几何形状）：
     - 卡片的核心视觉焦点
     - 数据可视化（图表、进度条）
     - 装饰性背景图形
     - 品牌或风格特定的图形
  2. **辅助视觉元素**（图标库如Font Awesome）：
     - 列表项的前缀标识
     - 功能性指示（星级、箭头、勾选）
     - 小型装饰性符号
     - 具体事物的表示（当需要具象表达时）
  3. **其他视觉形式**：
     - 大号数字或特殊文字排版
     - 有意识的留白设计
     - 抽象的图案和纹理

### 优先级2：内容完整性
- **核心原则**: 不删减重要内容，通过增加卡片数量解决
- **处理方式**: 
  - 如果一张图放不下所有要点，分成多张图展示
  - 宁可增加卡片数量（可达12张），也不删除关键信息
  - 每张卡片聚焦1个核心概念

### 优先级3：空间优化
1. **布局技巧**:
   - 避免大块文字段落
   - 多用图标、符号代替文字
   - 采用列表、要点而非长句
   - 合理使用缩写和精简表达

2. **尺寸控制**:
   - 减小内边距（padding: 16-24px）
   - 使用紧凑的字号（标题18-24px，正文12-14px）
   - 缩小元素间距（margin/gap: 8-16px）

## 基础要求
- **图片比例**: 所有图片必须为 3:4 的比例（宽:高）
- **边角处理**: 图片四角保持直角，不使用圆角
- **风格选择**: 如果用户未指定风格，根据主题内容自动匹配：
  - 科技、未来、宇宙主题 → 沙丘科幻美学
  - 艺术、教育、极简主题 → 康定斯基构成主义

## 文字与边缘间距
- 所有文字内容距离容器边缘至少保留 20px 的内边距
- 底部文字特别注意：距离底边至少 30px，避免被截断的视觉效果
- 顶部文字：距离顶边至少 20px

## 圆形容器中的文字
- 圆形内的文字应考虑圆形边缘的弧度
- 文字内容应在圆形内切正方形范围内，确保不会触碰圆形边缘
- 多行文字在圆形中应居中对齐，并适当缩小字号

## 响应式设计考虑
- 使用相对单位（em, rem, %）而非固定像素值
- 设置最小高度（min-height）确保内容不被压缩
- 使用 overflow: visible 避免内容被裁切

## 文字可读性
- 确保足够的行高（line-height: 1.5-1.8）
- 长文本考虑自动换行（word-wrap: break-word）
- 关键信息预留充足空间，宁可留白也不要拥挤

## 测试要点
- 在不同屏幕尺寸下检查布局
- 放大缩小浏览器查看是否有内容被截断
- 特别注意底部区域的文字显示完整性

## 具体修复建议
1. 图表底部文字：增加 padding-bottom 或调整文字位置
2. 圆形容器：使用 flexbox 居中，并设置合适的内边距
3. 时间线类元素：确保文字有足够的显示空间，必要时调整布局结构

## HTML文档生成通用规范

### 技术架构
- **CSS框架**: 使用 Tailwind CSS CDN
- **图标库**: Font Awesome 6.4.0
- **字体**: 根据风格要求选择合适字体（通过Google Fonts引入）
- **响应式**: 移动端优先设计

### 文档类型
- **输出格式**: 单个HTML文件，包含所有样式
- **展示方式**: 独立卡片网格布局（非长图滚动）
- **卡片尺寸**: 在页面中以合适大小展示，响应式适配

### 内容架构
1. **页面标题区**
   - 主标题 + 副标题说明
   - 风格相关的装饰元素

2. **卡片系统**
   - 每张卡片独立展示一个概念/步骤
   - 卡片数量：
     - 标准：6-12张
     - 内容较少时：最少4张
     - 根据内容深度灵活调整
   - 信息密度：每卡片聚焦1-2个核心要点

3. **内容深度**
   - 涵盖主题的完整逻辑链条
   - 包含：问题诊断、原理解析、方法介绍、实践指导、案例数据等
   - 确保内容的教育性和实用性

4. **社媒平台文案区域**
   - 位置：在卡片网格之后，页面底部
   - 容器：独立的白色背景区域，非卡片形式
   - 最大宽度：800px，居中显示
   - 内容结构：
     - 标题（独立复制按钮）
     - 正文（独立复制按钮）
     - 标签（独立复制按钮）
   - 样式：带阴影的圆角容器，内容区域有浅色背景

### 交互限制
- 纯静态展示，无动画效果
- 无hover效果
- 仅保留必要的JavaScript功能（如复制到剪贴板）
- 无CSS动画，保持完全静态

### 信息层次
- 建立清晰的视觉层级系统
- 使用不同的容器/面板区分信息重要性
- 保持风格一致性的同时突出重点内容

---

## 📐 卡片内容结构与截断风险控制（强制规范）

### ✅ 总原则
- 所有内容必须完全显示在卡片内，禁止任何滚动或裁切
- 每张图卡为固定尺寸静态图，内容不可溢出
- 不允许依赖 overflow-y-auto 等 CSS 特性隐藏内容
- 必须预留底部视觉安全空间，确保内容不被挤出显示区域

### ✅ 内容密度分级与布局规则

#### 低密度（6-8行）- 展示型布局
- SVG高度：100-120px
- 元素间距：margin 1.5-2rem
- 可包含：装饰性文字、宽松排版
- 适用：封面（规范见cover.md）、总结页

#### 中密度（9-11行）- 标准型布局  
- SVG高度：80-100px
- 元素间距：margin 1-1.5rem
- 适度精简：保留核心视觉元素
- 适用：大部分内容页

#### 高密度（12行严格上限）- 紧凑型布局
- SVG高度：60-80px（必须缩小）
- 元素间距：margin 0.5-1rem
- 必须精简：只保留核心内容
- 适用：信息量大的解析页

### ✅ 安全区间划分

| 区间 | 行数范围 | 风险等级 | 布局要求 |
|------|----------|----------|----------|
| 安全区 | 6-10行 | 低 | 可采用宽松布局 |
| 警告区 | 10-12行 | 中 | 必须采用紧凑布局 |
| 危险区 | >12行 | 高 | 必须拆分内容或重新设计 |

➡️ **严格上限：12行（包含所有元素）**

### ✅ 图文并茂建议

- 每张卡应包含至少一个视觉锚点元素（图形、标签、背景、icon等）
- 内容文字结构可参考：
  - 标题 + 场景设定 + 具体提示
  - 或：标题 + 误区陈述 + 正确做法
- 文案需简洁直观，避免冗长大段文字，一行控制在 35 个字以内
- 禁止大段纯文字，建议用列表、对话框、步骤图等形式分隔信息密度

### ⬇️ 固定底部边距规则

- 所有图文容器应预留至少 20px 的底部安全边距
- 禁止将 margin-bottom 写在容器外部（容易被裁切），应写入内容块本身
- **不得将容器填满到正好高度上限**，应留出“1段空行的余量”以防边距被裁剪
- 若内容总高度超过安全区，必须进行内容压缩或图文分拆处理

### ✅ 自动风险提示格式（生成后附带）

每张图生成完毕后，请追加如下格式的结构评估：

```
📋 图3 风险评估：
- 标题：避免误区：别以为熬夜等于努力
- 内容段数：3 段（共约 16 行）
- 风险等级：⚠️ 中等风险（可能超出安全区）
- 建议处理：可将误区和正确做法拆为两张图
```

此段评估可由模型生成，也可在人工检查阶段补充。所有图卡必须在最终版本中不出现截断或视觉压迫问题。