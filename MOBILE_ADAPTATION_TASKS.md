# AI Terminal 多端适配任务列表

## 项目概述
将现有的桌面端四窗体布局（左边栏-卡片管理、中间预览区、中间终端区、右边栏-创建区）适配为移动端友好的单页应用。

## 任务优先级排序
基于用户使用频率：**创建** > **文件** > **预览** > **终端**

---

## Phase 1: 基础架构搭建

### Task 1.1: 响应式检测与路由设计
**目标**: 实现设备检测和路由架构
**要求**:
- [ ] 创建移动端检测中间件 (`useDevice.js`)
- [ ] 设计底部导航路由结构 (`/mobile/create`, `/mobile/files`, `/mobile/preview`, `/mobile/terminal`)
- [ ] 实现桌面端/移动端视图切换逻辑
- [ ] 添加响应式断点管理 (768px以下为移动端)

**验收标准**:
- 页面自动根据屏幕尺寸显示不同布局
- 路由切换流畅，无白屏
- 支持横竖屏切换

### Task 1.2: 移动端主布局框架
**目标**: 创建移动端主容器和导航组件
**要求**:
- [ ] 创建 `MobileLayout.vue` 主布局组件
- [ ] 实现底部Tab导航栏 (`MobileTabBar.vue`)
- [ ] 添加全局状态栏（连接状态、生成进度）
- [ ] 实现页面间滑动切换手势

**验收标准**:
- 导航栏固定在底部，占用安全区域
- Tab切换有过渡动画，支持左右滑动
- 状态栏信息实时更新

---

## Phase 2: 核心页面开发

### Task 2.1: 创建页面 (Create) - 最高优先级
**目标**: 移动端友好的卡片创建界面
**要求**:
- [ ] 创建 `MobileCreate.vue` 组件
- [ ] **模板选择区域**:
  - 横向滑动卡片选择器
  - 大图标 + 模板名称显示
  - 支持无限循环滑动
  - 当前选中模板高亮指示
- [ ] **输入区域**:
  - 大尺寸多行文本框 (min-height: 120px)
  - 字数统计显示 (实时更新)
  - 智能建议标签 (基于历史输入)
  - 输入时键盘自适应
- [ ] **操作区域**:
  - 大号"创建卡片"按钮 (高度48px)
  - 生成状态实时显示 (进度条 + 文字)
  - 快速访问最近创建的卡片
- [ ] **交互优化**:
  - 模板点击预览功能
  - 输入联想提示
  - 生成完成后的成功反馈

**验收标准**:
- 模板选择流畅，视觉反馈清晰
- 输入体验良好，支持中文输入法
- 创建按钮状态准确反映操作状态
- 生成成功后自动跳转到文件列表

### Task 2.2: 文件页面 (Files) - 第二优先级
**目标**: 移动端文件管理界面
**要求**:
- [ ] 创建 `MobileFiles.vue` 组件
- [ ] **顶部工具栏**:
  - 搜索框 (支持文件名搜索)
  - 排序选项 (按时间/名称/类型)
  - 连接状态指示器
- [ ] **文件夹列表**:
  - 树形结构显示
  - 文件夹大图标 + 名称 + 文件数量
  - 文件类型图标区分 (JSON/HTML/RESP)
  - 支持下拉刷新
- [ ] **手势操作**:
  - 左滑显示操作菜单 (删除/分享)
  - 长按进入多选模式
  - 点击预览/编辑
- [ ] **操作优化**:
  - JSON文件突出显示"生成HTML"按钮
  - 响应文件特殊标识
  - 批量操作支持

**验收标准**:
- 文件列表流畅滚动，无性能问题
- 手势操作响应及时，反馈明确
- 搜索和排序功能正常工作
- 文件操作有确认机制

### Task 2.3: 预览页面 (Preview) - 第三优先级
**目标**: 沉浸式内容预览体验
**要求**:
- [ ] 创建 `MobilePreview.vue` 组件
- [ ] **全屏预览**:
  - 内容占满屏幕空间
  - 支持iframe内容缩放 (双指手势)
  - JSON内容语法高亮显示
- [ ] **浮动控制栏**:
  - 顶部：返回按钮 + 标题 + 更多操作
  - 底部：分享链接/原始HTML切换tabs
  - 自动隐藏机制 (3秒后隐藏)
- [ ] **手势控制**:
  - 上下滑动：滚动预览内容
  - 左右滑动：切换预览模式
  - 双指缩放：iframe内容缩放
  - 单击：显示/隐藏控制栏
- [ ] **分享功能**:
  - 一键复制链接到剪贴板
  - 原生分享API支持
  - 二维码生成分享

**验收标准**:
- 预览内容渲染正确，性能良好
- 手势操作流畅，无冲突
- 分享功能在各种移动设备上正常工作
- 控制栏交互自然

### Task 2.4: 终端页面 (Terminal) - 第四优先级
**目标**: 移动端友好的终端界面
**要求**:
- [ ] 创建 `MobileTerminal.vue` 组件
- [ ] **状态显示**:
  - Claude连接状态大图标显示
  - 操作提示和帮助信息
  - 连接失败时的重连按钮
- [ ] **终端优化**:
  - 全屏XTerm显示
  - 移动端字体大小调整 (14px+)
  - 虚拟键盘适配
  - 滚动性能优化
- [ ] **快捷工具**:
  - 常用命令快捷按钮
  - 历史命令快速选择
  - 自动补全支持
- [ ] **手势支持**:
  - 双指缩放调整字体大小
  - 长按选择文本
  - 三指滑动清屏

**验收标准**:
- 终端在移动设备上可用性良好
- 虚拟键盘不遮挡重要内容
- 命令输入和显示正常
- 与后端连接稳定

---

## Phase 3: 交互优化

### Task 3.1: 页面间联动设计
**目标**: 实现页面间的无缝数据传递
**要求**:
- [ ] **创建 → 文件**: 生成完成后自动跳转并高亮新文件
- [ ] **文件 → 预览**: 选择文件后自动跳转到预览页面
- [ ] **预览 → 创建**: 支持基于当前内容创建新卡片
- [ ] **跨页面状态**: 生成进度在所有页面显示
- [ ] 实现页面历史记录管理

**验收标准**:
- 页面跳转逻辑清晰，用户体验连贯
- 数据传递准确，无丢失
- 返回操作符合用户预期

### Task 3.2: 手势和触摸优化
**目标**: 提供原生级别的触摸体验
**要求**:
- [ ] 实现统一的手势识别系统
- [ ] 添加触摸反馈 (震动/视觉)
- [ ] 优化滚动性能和边界处理
- [ ] 支持iOS和Android原生手势
- [ ] 防误触机制

**验收标准**:
- 手势响应灵敏，无延迟
- 触摸反馈自然，不过度
- 在各种设备上表现一致

### Task 3.3: 性能优化
**目标**: 确保移动端流畅运行
**要求**:
- [ ] 实现虚拟滚动 (文件列表)
- [ ] 图片和内容懒加载
- [ ] 页面缓存策略
- [ ] 内存管理优化
- [ ] 网络请求优化

**验收标准**:
- 页面加载速度 < 2秒
- 滚动帧率 > 60fps
- 内存占用合理 (< 100MB)
- 弱网络环境下可用

---

## Phase 4: 样式和主题

### Task 4.1: 移动端UI适配
**目标**: 创建移动端专属的设计系统
**要求**:
- [ ] **颜色系统**: 适配移动端的对比度和可读性
- [ ] **字体层级**: 
  - 标题: 18-20px (触摸友好)
  - 正文: 16px (易读性)
  - 辅助: 14px
- [ ] **间距规范**:
  - 最小点击区域: 44px × 44px
  - 页面边距: 16px
  - 元素间距: 8px/12px/16px
- [ ] **组件库**: 创建移动端专用组件

**验收标准**:
- 所有可点击元素符合无障碍标准
- 文字在各种设备上清晰可读
- 间距比例协调，视觉层次清晰

### Task 4.2: 深色模式适配
**目标**: 支持系统级深色模式
**要求**:
- [ ] 跟随系统深色模式设置
- [ ] 自定义深色模式切换
- [ ] 深色模式下的颜色对比度优化
- [ ] 图标和图片的深色模式适配

**验收标准**:
- 深色模式切换流畅无闪烁
- 所有颜色符合WCAG AA标准
- 图标在深色模式下清晰可见

---

## Phase 5: 测试和优化

### Task 5.1: 设备兼容性测试
**目标**: 确保在主流设备上正常运行
**要求**:
- [ ] iOS设备测试 (iPhone 12+, iPad)
- [ ] Android设备测试 (主流品牌)
- [ ] 不同屏幕尺寸适配
- [ ] 横竖屏切换测试
- [ ] 刘海屏和挖孔屏适配

**验收标准**:
- 在95%的主流设备上正常运行
- 无明显布局错乱或功能缺失
- 性能指标达到预期

### Task 5.2: 用户体验测试
**目标**: 验证移动端易用性
**要求**:
- [ ] 用户路径测试 (创建-预览-分享流程)
- [ ] 无障碍功能测试
- [ ] 极端情况处理 (网络断开、内存不足)
- [ ] 用户反馈收集和优化

**验收标准**:
- 主要功能流程完成率 > 95%
- 用户满意度评分 > 4.0/5.0
- 无严重可用性问题

---

## 技术架构要求

### 开发规范
1. **组件命名**: Mobile前缀 + 功能名称
2. **文件结构**: `/src/views/mobile/` 目录
3. **样式管理**: 使用CSS Module或Scoped CSS
4. **状态管理**: 复用现有Vuex store
5. **API复用**: 最大化复用现有API接口

### 性能指标
- **首屏加载**: < 2秒
- **页面切换**: < 300ms
- **内存占用**: < 100MB
- **电池消耗**: 低功耗模式支持

### 兼容性要求
- **iOS**: 13.0+
- **Android**: 8.0+ (API level 26+)
- **浏览器**: Safari 13+, Chrome 80+
- **PWA支持**: 支持添加到主屏幕

---

## 交付物清单

### 代码交付
- [ ] 移动端页面组件 (4个主要页面)
- [ ] 响应式布局系统
- [ ] 手势识别系统
- [ ] 移动端样式库

### 文档交付
- [ ] 移动端开发文档
- [ ] 组件使用说明
- [ ] 性能优化指南
- [ ] 测试报告

### 测试交付
- [ ] 单元测试 (覆盖率 > 80%)
- [ ] E2E测试用例
- [ ] 性能测试报告
- [ ] 兼容性测试矩阵

---

## 时间节点规划

- **Week 1-2**: Phase 1 基础架构
- **Week 3-6**: Phase 2 核心页面开发
- **Week 7-8**: Phase 3 交互优化
- **Week 9**: Phase 4 样式和主题
- **Week 10-11**: Phase 5 测试和优化
- **Week 12**: 交付和部署

**总计**: 3个月开发周期